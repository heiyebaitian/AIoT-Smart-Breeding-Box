# 串口屏幕代码文档
本文档将介绍串口屏幕通讯协议以及其他相关内容,用于记录协议约定

## 协议约定
### 一、屏幕 to MCU
屏幕发往MCU的数据均为16进制数据,MCU仅需要读取对应位置的值即可
串口屏在发出命令之后需要将全局变量 `[mcu_status]` 置 `0` 以表示等待MCU回应,如果未回应则重复发送
MCU在收到屏幕命令后
#### 1.系统启动成功报告
此命令发出后表示屏幕进入`[BOOT]`页面,需配合下一命令准备将 `mcu_status=1` 以完成启动流程
```
88 FF FF FF
```
#### 2.BOOT就绪报告
当收到此命令,表示屏幕已完成进入 `[HOME]` 页面的准备,请在收到此命令后尽快将 `mcu_status=1` 以完成启动流程,否则将触发启动超时错误,屏幕将拒绝响应其他命令
```
00 FF FF FF
```
#### 3.系统错误报告
当收到此命令,表示屏幕发生错误需要复位,可能是由于以下原因导致:
1.BOOT启动超时
2.未知的变量操作
```
EE EE EE FF FF FF
```
当接收到此命令后MCU需要发送 `rest` 以重启屏幕
#### 4.页面ID报告
当收到此命令,页面ID发生变化时,MCU需要清除当前控件状态或将当前页面控件变量移入后台
```
01 [页面ID] FF FF FF
```
#### 5.一般按钮触发报告
该命令仅能在触发后使用,请根据使用情况决定是否启用重传
```
02 [页面ID] [按钮控件ID] [触发状态] FF FF FF

[触发状态]:0--按下触发	1--松开触发
```
#### 6.双态按钮触发报告
```
03 [页面ID] [按钮控件ID] [触发状态] FF FF FF
[触发状态]:0--关	1--开启
```
#### 7.滑动条报告
```
04 [页面ID] [滑动条控件ID] [值0-255] FF FF FF
```




### 二、MCU to 屏幕
详细请见 `/doc` 下的指令集文档